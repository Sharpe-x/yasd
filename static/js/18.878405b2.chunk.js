(this.webpackJsonpyasd=this.webpackJsonpyasd||[]).push([[18],{257:function(e,t,r){"use strict";var a=r(0),i=r(245),o=r(264),n=(r(1),r(9));var s={name:"by4vme",styles:"padding:0.3rem;"};t.a=()=>{const e=Object(n.g)();return Object(a.f)(i.a,{onClick:()=>e.goBack(),label:"back",css:[s,{width:"2rem",height:"2rem",marginRight:"0.75rem",alignSelf:"center"}]},Object(a.f)(o.a,null))}},262:function(e,t,r){"use strict";var a=r(50),i=r(0),o=r(167),n=r(266),s=r(1),c=r(257);var l={name:"z89845",styles:"margin-right:env(safe-area-inset-right);"},d={name:"1od6or",styles:"padding-left:env(safe-area-inset-left);"};t.a=e=>{const[t,r]=Object(s.useState)((()=>{var t;return null!==(t=e.defaultAutoRefreshState)&&void 0!==t&&t})),b=Object(s.useMemo)((()=>"undefined"===typeof e.sticky||e.sticky),[e.sticky]);return Object(s.useEffect)((()=>{e.hasAutoRefresh&&e.onAuthRefreshStateChange&&e.onAuthRefreshStateChange(t)}),[t,e,e.hasAutoRefresh,e.onAuthRefreshStateChange]),Object(i.f)(o.a,{size:"tera",noMargin:!0,css:[b?{position:"sticky",top:"0"}:"",{display:"flex",alignItems:"center",justifyContent:"space-between",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)","--bg-opacity":"1",backgroundColor:"rgba(255, 255, 255, var(--bg-opacity))",zIndex:"10",paddingLeft:"0.75rem",paddingRight:"0.75rem",paddingTop:"0.75rem",paddingBottom:"0.75rem"},Object(a.a)("")]},Object(i.f)("div",{css:[d,{display:"flex",alignItems:"center"}]},Object(i.f)(c.a,null),Object(i.f)("div",null,e.title)),e.hasAutoRefresh&&Object(i.f)("div",{onClick:()=>r(!t),css:[{"--bg-opacity":"1",backgroundColor:"rgba(66, 153, 225, var(--bg-opacity))","--text-opacity":"1",color:"rgba(255, 255, 255, var(--text-opacity))",cursor:"pointer",width:"2.5rem",height:"2.5rem",borderRadius:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center",transitionProperty:"background-color, border-color, color, fill, stroke",transitionDuration:"200ms",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)"},t&&{"--bg-opacity":"1",backgroundColor:"rgba(252, 129, 129, var(--bg-opacity))"},l]},Object(i.f)(n.a,{css:[{width:"1.5rem",height:"1.5rem"},t&&{animation:"spin 1s linear infinite"}]})))}},263:function(e,t,r){"use strict";var a=r(0);r(1);var i={name:"12ax8ys",styles:"padding-bottom:env(safe-area-inset-bottom);"};t.a=e=>{let t=!0;return"boolean"===typeof e.offsetBottom&&(t=e.offsetBottom),Object(a.f)("div",{css:[{position:"fixed",top:"0",right:"0",bottom:"0",left:"0",height:"100%",overflow:"hidden"},t?i:""]},Object(a.f)("div",{css:{width:"100%",height:"100%",display:"flex",flexDirection:"column"}},e.children))}},311:function(e,t,r){"use strict";r.r(t);var a=r(50),i=r(0),o=r(64),n=r(279),s=r(237),c=r(299),l=r(1),d=r.n(l),b=r(16),f=r(278),u=r(9),m=r(263),p=r(262),g=r(7),j=r(15),O=r(71),v=r.n(O),h=r(102),y=r.n(h),x=r(29);var S={name:"177cgdj",styles:"height:1rem;line-height:1rem;font-size:0.5rem;"};var w=e=>{let{failed:t,method:r,status:a,...o}=e;return Object(i.f)("div",Object.assign({},o,{css:[{borderRadius:"0.25rem",paddingLeft:"0.25rem",paddingRight:"0.25rem","--text-opacity":"1",color:"rgba(255, 255, 255, var(--text-opacity))",display:"inline-block"},S,Object(x.d)(t)?{"--bg-opacity":"1",backgroundColor:"rgba(245, 101, 101, var(--bg-opacity))"}:"Active"===a?{"--bg-opacity":"1",backgroundColor:"rgba(72, 187, 120, var(--bg-opacity))"}:{"--bg-opacity":"1",backgroundColor:"rgba(66, 153, 225, var(--bg-opacity))"}]}),r.toUpperCase())};var C={name:"1f1jesu",styles:"height:1.5rem;"};var k=e=>{let{req:t}=e;const{t:r}=Object(s.a)();return Object(i.f)(d.a.Fragment,null,Object(i.f)("div",{css:{fontSize:".875rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},t.URL),Object(i.f)("div",{css:[{display:"flex",alignItems:"center",lineHeight:"1",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},C]},Object(i.f)(w,{method:t.method,failed:t.failed,status:t.status}),Object(i.f)("div",{css:{fontSize:".75rem",marginLeft:"0.25rem"}},"#",t.id),Object(i.f)("div",{css:{fontSize:".75rem",marginLeft:"0.25rem"}},Object(i.f)("span",null," - "),Object(i.f)("span",null,y.a.unix(t.startDate).format("HH:mm:ss"))),t.policyName?Object(i.f)("div",{css:{fontSize:".75rem",marginLeft:"0.25rem"}},Object(i.f)("span",null," - "),Object(i.f)("span",null,t.policyName)):null,Object(i.f)("div",{css:{fontSize:".75rem",marginLeft:"0.25rem"}},Object(i.f)("span",null," - "),Object(i.f)("span",null,v()(t.inBytes+t.outBytes))),Object(i.f)("div",{css:{fontSize:".75rem",marginLeft:"0.25rem"}},Object(i.f)("span",null," - "),Object(i.f)("span",null,r(`requests.${a=t.status,a.toLowerCase().replace(/\s/g,"_")}`)))));var a},q=r(11),z=r(286),R=r(207),_=r(208),L=r(303),A=r(300),B=r(47),I=(r(287),r(53));const M=Object(q.a)("div",{target:"e1tgbdj10"})(".react-tabs__tab{",{fontSize:".875rem",fontWeight:"500",borderStyle:"none",transitionProperty:"background-color, border-color, color, fill, stroke",transitionDuration:"200ms",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",":active":{boxShadow:"none",borderStyle:"none"},":focus":{boxShadow:"none",borderStyle:"none"}},"}.react-tabs__tab--selected{",{"--text-opacity":"1",color:"rgba(66, 153, 225, var(--text-opacity))","--bg-opacity":"1",backgroundColor:"rgba(235, 248, 255, var(--bg-opacity))",borderStyle:"none"},"}.react-tabs__tab-list{",{borderBottomWidth:"2px","--border-opacity":"1",borderColor:"rgba(235, 248, 255, var(--border-opacity))",marginBottom:"1rem"},"}.react-tabs__tab-panel{height:25rem;overflow:auto;}");var D={name:"s6bgx",styles:"min-height:7rem;"},T={name:"s6bgx",styles:"min-height:7rem;"},U={name:"wlea3r",styles:"margin-bottom:2px;"},W={name:"1fhgjcy",styles:"margin-top:4px;"};var F=e=>{let{req:t,onClose:r}=e;const{t:a}=Object(s.a)(),o=Object(l.useCallback)((e=>{Object(j.a)({url:"/requests/kill",method:"POST",data:{id:e}}).then((()=>(B.b.success(a("common.success_interaction")),Promise.all([Object(b.c)("/requests/recent"),Object(b.c)("/requests/active")])))).catch((e=>{B.b.error(a("common.failed_interaction")),console.error(e)}))}),[a]);return Object(i.f)(R.a,null,Object(i.f)(_.a,{title:`Detail (#${t.id})`,onClose:r}),Object(i.f)("div",{css:[{marginBottom:"0.75rem",display:"flex",alignItems:"center",lineHeight:"1.5"}]},Object(i.f)(w,{css:W,method:t.method,failed:t.failed,status:t.status}),Object(i.f)("div",{css:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:"1rem",fontWeight:"500",flex:"1 1 0%",marginLeft:"0.25rem"}},t.URL)),Object(i.f)(M,null,Object(i.f)(A.d,null,Object(i.f)(A.b,null,Object(i.f)(A.a,null,a("requests.general_tab")),Object(i.f)(A.a,null,a("requests.request_tab")),Object(i.f)(A.a,null,a("requests.timing_tab"))),Object(i.f)(A.c,null,Object(i.f)(I.a,null,Object(i.f)(I.c,{css:{fontSize:".875rem"}},Object(i.f)("div",null,a("requests.date")),Object(i.f)("div",null,y.a.unix(t.startDate).format("L LTS"))),Object(i.f)(I.c,{css:{fontSize:".875rem"}},Object(i.f)("div",null,a("requests.status")),Object(i.f)("div",null,t.status)),Object(x.d)(t.completed)&&Object(i.f)(I.c,{css:{fontSize:".875rem"}},Object(i.f)("div",null,a("requests.duration")),Object(i.f)("div",null,y.a.unix(t.completedDate).diff(y.a.unix(t.startDate)),"ms")),0!==t.pid&&t.processPath&&Object(i.f)(I.c,{css:{fontSize:".875rem"}},Object(i.f)("div",null,a("requests.process")),Object(i.f)("div",null,H(t.processPath),"(",t.pid,")"))),Object(i.f)(I.a,null,Object(i.f)(I.c,{css:{fontSize:".875rem"}},Object(i.f)("div",null,a("requests.policy_name")),Object(i.f)("div",null,t.policyName)),Object(i.f)(I.c,{css:{fontSize:".875rem"}},Object(i.f)("div",null,a("requests.rule_name")),Object(i.f)("div",null,t.rule))),!!t.localAddress&&!!t.remoteAddress&&Object(i.f)(I.a,{title:a("requests.ip_addr")},Object(i.f)(I.c,{css:{fontSize:".875rem"}},Object(i.f)("div",null,a("requests.local_ip")),Object(i.f)("div",null,t.localAddress)),Object(i.f)(I.c,{css:{fontSize:".875rem"}},Object(i.f)("div",null,a("requests.remote_ip")),Object(i.f)("div",null,Object(i.f)("a",{href:`https://ip.sb/ip/${t.remoteAddress}`,target:"_blank",rel:"noreferrer noopener"},Object(i.f)(L.a,{css:[U,{display:"inline",marginRight:"0.25rem",width:"0.75rem",height:"0.75rem"}]}),t.remoteAddress)))),Object(i.f)(I.a,{title:a("requests.traffic")},Object(i.f)(I.c,{css:{fontSize:".875rem"}},Object(i.f)("div",null,a("requests.download")),Object(i.f)("div",null,v()(t.inBytes))),Object(i.f)(I.c,{css:{fontSize:".875rem"}},Object(i.f)("div",null,a("requests.upload")),Object(i.f)("div",null,v()(t.outBytes)))),Object(i.f)(I.a,{title:a("requests.remark")},Object(i.f)("pre",{css:[T,{fontFamily:'Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace',fontSize:".75rem","--text-opacity":"1",color:"rgba(113, 128, 150, var(--text-opacity))",lineHeight:"1.25",padding:"0.75rem",whiteSpace:"pre-wrap",overflowWrap:"break-word"}]},t.notes&&t.notes.join("\n"))),Object(x.b)(t.completed)&&"UDP"!==t.method&&Object(i.f)(I.a,{title:"Action"},Object(i.f)("div",{css:{"--text-opacity":"1",color:"rgba(245, 101, 101, var(--text-opacity))",padding:"0.75rem",cursor:"pointer",":hover":{"--bg-opacity":"1",backgroundColor:"rgba(237, 242, 247, var(--bg-opacity))"}},onClick:()=>o(t.id)},a("requests.kill_connection_button_title"),"..."))),Object(i.f)(A.c,null,Object(i.f)(I.a,{title:a("requests.request_header_title")},Object(i.f)("pre",{css:[D,{fontFamily:'Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace',fontSize:".75rem","--text-opacity":"1",color:"rgba(113, 128, 150, var(--text-opacity))",lineHeight:"1.25",padding:"0.75rem",whiteSpace:"pre-wrap",overflowWrap:"break-word"}]},t.requestHeader||""))),Object(i.f)(A.c,null,Object(i.f)(I.a,null,t.timingRecords&&t.timingRecords.map(((e,t)=>Object(i.f)(I.c,{key:t,css:{fontSize:".875rem"}},Object(i.f)("div",null,e.name),Object(i.f)("div",null,e.durationInMillisecond,"ms")))))))))};const H=e=>Object(z.basename)(e);var P={name:"1g1174o",styles:"padding-left:calc(env(safe-area-inset-left) + 0.75rem);padding-right:calc(env(safe-area-inset-right) + 0.75rem);"};t.default=()=>{const{setModal:e}=Object(o.b)(),{t:t}=Object(s.a)(),r=Object(g.e)(),[O,v]=Object(l.useState)(!0),[h,y]=Object(l.useState)("recent"),{data:x,error:S}=Object(b.b)((()=>"/requests/"+h),j.a,{revalidateOnFocus:!1,revalidateOnReconnect:!1,dedupingInterval:1e3,refreshInterval:O?"macos"===(null===r||void 0===r?void 0:r.platform)?2e3:4e3:0}),[w,C]=Object(l.useState)([]),[q,z]=Object(l.useState)([]),R=Object(l.useMemo)((()=>"recent"===h?w:q),[h,w,q]),_=new URLSearchParams(Object(u.h)().search),L=Object(l.useMemo)((()=>_.get("source")),[_]);Object(l.useEffect)((()=>{if(!(null===x||void 0===x?void 0:x.requests))return;const e=[...x.requests],t=new Date;let r=[...R];for(;e.length;){const a=e.pop(),i=r.findIndex((e=>e.id===a.id));i>=0?Object.assign(r[i],{...Object(c.a)(a,["id"]),lastUpdated:t}):r.length&&a.id>r[0].id?r.unshift({...a,lastUpdated:t}):r.push({...a,lastUpdated:t})}r="recent"===h?r.filter((e=>!L||L===e.sourceAddress)).slice(0,150):r.filter((e=>L?e.lastUpdated===t&&L===e.sourceAddress:e.lastUpdated===t)).sort(((e,t)=>t.id-e.id)),"recent"===h?(C(r),z([])):(C([]),z(r))}),[x,h,L]);const A=Object(l.useCallback)((t=>{e({children(e){let{onClose:r}=e;return r?Object(i.f)(F,{req:t,onClose:r}):Object(i.f)(d.a.Fragment,null)},onClose(){}})}),[e]),B=Object(l.useCallback)((e=>{let{key:t,index:r,isScrolling:a,isVisible:o,style:n}=e;const s=R[r];return Object(i.f)("div",{key:t,style:n,onClick:()=>A(s),css:[P,{display:"flex",flexDirection:"column",justifyContent:"center",paddingTop:"0.5rem",paddingBottom:"0.5rem",cursor:"pointer",":hover":{"--bg-opacity":"1",backgroundColor:"rgba(247, 250, 252, var(--bg-opacity))"}}]},Object(i.f)(k,{req:s}))}),[R,A]);return Object(i.f)(m.a,null,Object(i.f)(d.a.Fragment,null,Object(i.f)(p.a,{title:t("home.requests"),hasAutoRefresh:!0,defaultAutoRefreshState:!0,onAuthRefreshStateChange:e=>v(e)}),Object(i.f)("div",{css:{flex:"1 1 0%"}},x?R.length?Object(i.f)(f.a,null,(e=>{let{width:t,height:r}=e;return Object(i.f)(f.b,{width:t,height:r,rowCount:R.length,rowHeight:64,rowRenderer:B,style:{outline:"none"},css:Object(a.a)("& > div{",{"> :not(template) ~ :not(template)":{"--divide-y-reverse":0,borderTopWidth:"calc(1px * calc(1 - var(--divide-y-reverse)))",borderBottomWidth:"calc(1px * var(--divide-y-reverse))","--divide-opacity":"1",borderColor:"rgba(237, 242, 247, var(--divide-opacity))"}},"}")})})):Object(i.f)("div",{css:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1rem","--text-opacity":"1",color:"rgba(160, 174, 192, var(--text-opacity))"}},t("common.no_data")):Object(i.f)("div",{css:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1rem","--text-opacity":"1",color:"rgba(160, 174, 192, var(--text-opacity))"}},t("common.is_loading"),"...")),Object(i.f)("div",{css:[{display:"flex","> :not(template) ~ :not(template)":{"--divide-x-reverse":0,borderRightWidth:"calc(1px * var(--divide-x-reverse))",borderLeftWidth:"calc(1px * calc(1 - var(--divide-x-reverse)))","--divide-opacity":"1",borderColor:"rgba(237, 242, 247, var(--divide-opacity))"},borderTopWidth:"1px",borderStyle:"solid","--border-opacity":"1",borderColor:"rgba(237, 242, 247, var(--border-opacity))",paddingTop:"0.5rem",paddingBottom:"0.5rem",paddingLeft:"0.5rem",paddingRight:"0.5rem"},Object(a.a)("& > div{",{marginLeft:"0.5rem",marginRight:"0.5rem"},"}& > div:first-of-type{margin-left:0;}")]},Object(i.f)(n.a,{css:[{display:"flex",justifyContent:"center",alignItems:"center"},Object(a.a)("& label{",{paddingTop:"0.5rem",paddingBottom:"0.5rem",paddingLeft:"1rem",paddingRight:"1rem",marginLeft:"0.5rem",marginTop:"0.25rem",marginBottom:"0.25rem",fontSize:".875rem"},"}& label:first-of-type{margin-left:0;}")],label:"choose the dns result group",name:"selector-group",onChange:e=>{y((()=>{const t=e.target.value;return Object(b.c)("/requests/"+t),t}))},options:[{children:t("requests.recent"),value:"recent"},{children:t("requests.active"),value:"active"}],value:h}))))}}}]);
//# sourceMappingURL=18.878405b2.chunk.js.map